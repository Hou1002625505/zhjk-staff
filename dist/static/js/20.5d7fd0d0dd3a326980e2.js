webpackJsonp([20],{aTeQ:function(e,t,a){"use strict";var s=a("kbG3"),i=a("wmxo"),n=(s.a,String,Boolean,Boolean,String,Number,String,Boolean,Number,Boolean,Array,{name:"x-switch",components:{InlineDesc:s.a},computed:{labelStyle:function(){var e=/<\/?[^>]*>/.test(this.title),t=Math.min(e?5:this.title.length+1,14)+"em";return Object(i.a)({display:"block",width:this.$parent.labelWidth||t,textAlign:this.$parent.labelAlign})},labelClass:function(){return{"vux-cell-justify":this.$parent&&"justify"===this.$parent.labelAlign}}},methods:{onClick:function(){this.$emit("on-click",!this.currentValue,this.currentValue)},toBoolean:function(e){return this.valueMap?1===this.valueMap.indexOf(e):e},toRaw:function(e){return this.valueMap?this.valueMap[e?1:0]:e}},props:{title:{type:String,required:!0},disabled:Boolean,value:{type:[Boolean,String,Number],default:!1},inlineDesc:[String,Boolean,Number],preventDefault:Boolean,valueMap:{type:Array,default:function(){return[!1,!0]}}},data:function(){return{currentValue:this.toBoolean(this.value)}},watch:{currentValue:function(e){var t=this.toRaw(e);this.$emit("input",t),this.$emit("on-change",t)},value:function(e){this.currentValue=this.toBoolean(e)}}}),r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vux-x-switch weui-cell weui-cell_switch"},[a("div",{staticClass:"weui-cell__bd"},[a("label",{staticClass:"weui-label",class:e.labelClass,style:e.labelStyle,domProps:{innerHTML:e._s(e.title)}}),e._v(" "),e.inlineDesc?a("inline-desc",[e._v(e._s(e.inlineDesc))]):e._e()],1),e._v(" "),a("div",{staticClass:"weui-cell__ft"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],staticClass:"weui-switch",attrs:{type:"checkbox",disabled:e.disabled},domProps:{checked:Array.isArray(e.currentValue)?e._i(e.currentValue,null)>-1:e.currentValue},on:{change:function(t){var a=e.currentValue,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&(e.currentValue=a.concat([null])):n>-1&&(e.currentValue=a.slice(0,n).concat(a.slice(n+1)))}else e.currentValue=i}}}),e._v(" "),e.preventDefault?a("div",{staticClass:"vux-x-switch-overlay",on:{click:e.onClick}}):e._e()])])},staticRenderFns:[]};var o=a("VU/8")(n,r,!1,function(e){a("dUgK")},null,null);t.a=o.exports},cjyh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("pFYg"),i=a.n(s),n=a("mvHQ"),r=a.n(n),o=a("bOdI"),l=a.n(o),c=a("aTeQ"),u=a("/AfO"),h=a("4kSj"),m=a.n(h),v=(c.a,u.a,{data:function(){var e;return e={currentTime:this.config.formatDate(this.config.currentTime()),show:!1,show1:!1,show2:!1,allStore:0,storesList:"",storeNameList:"",percent:50,num:"",value:!1,area:"",shopName1:"",yuearray:[1,2,3,4,5,6,7,8,9,10,11,12],gangweiarray:"",employeeData:[],employeeData1:[],monthvalue:"",monthvalue1:"",yejivalue:"销售业绩",gangweivalue:""},l()(e,"currentTime",this.config.formatDate(this.config.currentTime())),l()(e,"monthshow",!1),l()(e,"yejishow",!1),l()(e,"gangweishow",!1),l()(e,"ksj",!1),l()(e,"positionInfo",""),l()(e,"custel",""),e},created:function(){this.club(),this.getGxdict(),this.computedmonth(),this.getuserinfo()},mounted:function(){this.ispermission()},computed:{},methods:{getuserinfo:function(){var e=this;this.instance.$post("/rest/wx/customer/getQyUser",{},function(t){e.positionInfo=t.rows[0],e.watermark({watermark_txt0:t.rows[0].realName+"-"+t.rows[0].userName+" "+e.currentTime})})},getGxdict:function(){var e=this;this.instance.$post("/rest/wx/customerGx/getGxDictTitleSale",{},function(t){console.log(r()(t)),t.status&&(e.gangweiarray=t.rows)})},ispermission:function(){var e=0;this.$store.state.jurisdiction.length>0?(this.$store.state.jurisdiction.forEach(function(t){"经营管理"==t.permissionName&&(e=1)}),0==e&&(this.$refs.watermarks.style.display="none",this.config.showTip(this,"无权限访问"))):(this.$refs.watermarks.style.display="none",this.config.showTip(this,"无权限访问"))},analyze:function(){var e=this;this.ksj=!1;var t=this.monthvalue;t<10&&(t="0"+t);var a=this.config.formatDate(this.config.currentTime()).split("-")[0]+t,s={clubCode:this.num+"",startDate:a};if(""!=this.custel){/^[0-9]+.?[0-9]*$/.test(this.custel)?s.userId=this.custel:s.userName=this.custel}this.instance.$post("/rest/wx/report/getEmployeeAnalysisReport",s,function(t){if(t.status){e.ksj=!0,e.employeeData=t.rows;var a=[];e.employeeData1=[],e.employeeData.forEach(function(t){t.use_finish||(t.use_finish=0),t.use_task||(t.use_task=0),t.sale_finish||(t.sale_finish=0),t.sale_task||(t.sale_task=0),0!=t.sale_fin_bl1.replace(/%/g,"")?e.employeeData1.push(t):a.push(t)}),e.employeeData1.sort(e.compare("sale_fin_bl1")),a.sort(e.compare1("sale_finish")),console.log(r()(a)),e.employeeData1=e.employeeData1.concat(a)}})},compare:function(e){return function(t,a){var s=t[e].replace(/%/g,"");return a[e].replace(/%/g,"")-s}},compare1:function(e){return function(t,a){var s=t[e];return a[e]-s}},getcusinfo:function(){this.analyze()},computedmonth:function(){var e=this.config.formatDate(this.config.currentTime()).split("-")[1];0==e.split("")[0]?(this.monthvalue1=e.split("")[1],this.monthvalue=e.split("")[1]):(this.monthvalue1=e,this.monthvalue=e)},selmonthshow:function(){this.monthshow=!this.monthshow,this.yejishow=!1,this.gangweishow=!1,this.monthshow?this.onTouchMove(!0):this.onTouchMove(!1)},selectmonth:function(e){e>this.monthvalue1||(this.monthvalue=e,this.monthshow=!1,this.analyze())},selyejishow:function(){this.yejishow=!this.yejishow,this.monthshow=!1,this.gangweishow=!1},selectyeji:function(e){var t=this;this.yejivalue=e,this.yejishow=!1;var a=[];this.employeeData1=[],"销售业绩"==this.yejivalue?(this.employeeData.forEach(function(e){0!=e.sale_fin_bl1.replace(/%/g,"")?t.employeeData1.push(e):a.push(e)}),this.employeeData1.sort(this.compare("sale_fin_bl1")),a.sort(this.compare1("sale_finish")),this.employeeData1=this.employeeData1.concat(a)):(this.employeeData.forEach(function(e){0!=e.use_fin_bl1.replace(/%/g,"")?t.employeeData1.push(e):a.push(e)}),this.employeeData1.sort(this.compare("use_fin_bl1")),a.sort(this.compare1("use_finish")),this.employeeData1=this.employeeData1.concat(a))},selgangweishow:function(){this.gangweishow=!this.gangweishow,this.yejishow=!1,this.monthshow=!1},selectgangwei:function(e){this.gangweivalue==e?this.gangweivalue="":this.gangweivalue=e,this.gangweishow=!1},fangyueme:function(){this.yejishow=!1,this.monthshow=!1,this.gangweishow=!1},deleteinfo:function(){this.custel="",this.analyze()},club:function(){var e=this;this.instance.$post("/rest/wx/customer/club/employeeViewClub",{},function(t){if(t.status){e.storeNameList=t.rows;var a=e.getCookieValue("storeTime")?e.getCookieValue("storeTime"):0,s=localStorage.getItem("storeInfo");if(null!=s&&a>0){var i=JSON.parse(s);e.num=i.sysClubCode,e.shopName1=i.shopName}else e.num=t.rows[0].sysClubCode,e.shopName1=t.rows[0].clubName;e.analyze()}})},onTouchMove:function(e){var t=function(e){e.preventDefault()};e?document.body.addEventListener("touchmove",t,!1):document.body.removeEventListener("touchmove",t,!1)},experience:function(){this.$router.replace({name:"experience"})},analysis:function(){this.$router.replace({name:"customerAnalysis"})},yejidetail:function(e){this.$router.push({name:"personalAchievement",query:{id:e,clubid:this.num}})},showStore:function(){this.show=!0},cancel:function(){this.show=!1},throughCity:function(){this.allStore=1},selectShop:function(e,t,a){this.shopName1=e,this.num=t,this.show=!1,this.custel="";var s={sysClubCode:t,shopName:e};localStorage.setItem("storeInfo",r()(s)),this.addCookie("storeTime",10800,10800),this.analyze()},change:function(e,t,a){this.num=e,this.area=t,this.allStore=0},watermark:function(e){var t={watermark_txt0:"",watermark_txt1:"",watermark_txt2:"",watermark_x:100,watermark_y:200,watermark_rows:20,watermark_cols:20,watermark_x_space:100,watermark_y_space:50,watermark_color:"#aaa",watermark_alpha:.2,watermark_fontsize:"15px",watermark_font:"微软雅黑",watermark_width:210,watermark_height:30,watermark_angle:15};if(1===arguments.length&&"object"===i()(arguments[0])){var a=arguments[0]||{},s="";for(s in a)a[s]&&t[s]&&a[s]===t[s]||a[s]&&(t[s]=a[s])}var n,r,o=document.createDocumentFragment(),l=(l=Math.max(document.body.scrollWidth,document.body.clientWidth))-.015*l,c=Math.max(document.body.scrollHeight,document.body.clientHeight);(0==t.watermark_cols||parseInt(t.watermark_x+t.watermark_width*t.watermark_cols+t.watermark_x_space*(t.watermark_cols-1))>l)&&(t.watermark_cols=parseInt((l-t.watermark_x+t.watermark_x_space)/(t.watermark_width+t.watermark_x_space)),t.watermark_x_space=parseInt((l-t.watermark_x-t.watermark_width*t.watermark_cols)/(t.watermark_cols-1))),(0==t.watermark_rows||parseInt(t.watermark_y+t.watermark_height*t.watermark_rows+t.watermark_y_space*(t.watermark_rows-1))>c)&&(t.watermark_rows=parseInt((t.watermark_y_space+c-t.watermark_y)/(t.watermark_height+t.watermark_y_space)),t.watermark_y_space=parseInt((c-t.watermark_y-t.watermark_height*t.watermark_rows)/(t.watermark_rows-1)));for(var u=0;u<t.watermark_rows;u++){r=t.watermark_y+(t.watermark_y_space+t.watermark_height)*u;for(var h=0;h<t.watermark_cols;h++){n=t.watermark_x+(t.watermark_width+t.watermark_x_space)*h;var m=document.createElement("div");m.id="mask_div"+u+h,m.className="mask_div";var v=document.createElement("div");v.appendChild(document.createTextNode(t.watermark_txt0)),m.appendChild(v),m.style.webkitTransform="rotate(-"+t.watermark_angle+"deg)",m.style.MozTransform="rotate(-"+t.watermark_angle+"deg)",m.style.msTransform="rotate(-"+t.watermark_angle+"deg)",m.style.OTransform="rotate(-"+t.watermark_angle+"deg)",m.style.transform="rotate(-"+t.watermark_angle+"deg)",m.style.visibility="",m.style.position="absolute",m.style.left=n+"px",m.style.top=r+"px",m.style.overflow="hidden",m.style.zIndex="9999",m.style.pointerEvents="none",m.style.opacity=t.watermark_alpha,m.style.fontSize=t.watermark_fontsize,m.style.fontFamily=t.watermark_font,m.style.color=t.watermark_color,m.style.textAlign="center",m.style.width=t.watermark_width+"px",m.style.height=t.watermark_height+"px",m.style.display="block",o.appendChild(m)}}document.body.appendChild(o)}},components:{XSwitch:c.a,XCircle:u.a},watch:{$route:function(e,t){var a=this;console.log(t),"personalAchievement"==t.name&&setTimeout(function(){a.watermark({watermark_txt0:a.positionInfo.realName+"-"+a.positionInfo.userName+" "+a.currentTime})},10)},"$store.state.jurisdiction":function(){this.ispermission()}},destroyed:function(){m()(".mask_div").remove()}}),_={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fangc watermarks",class:{notScroll:e.monthshow||e.yejishow||e.gangweishow}},[s("div",{staticClass:"container"},[s("div",{staticClass:"menus"},[s("div",{staticClass:"menu"},[s("div",{staticClass:"item br",on:{click:e.experience}},[e._v("经营概况")]),e._v(" "),s("div",{staticClass:"item ",on:{click:e.analysis}},[e._v("客户分析")]),e._v(" "),s("div",{staticClass:"item active"},[e._v("员工分析")])]),e._v(" "),s("div",{staticClass:"currentStore",on:{click:e.showStore}},[e._m(0),e._v(" "),s("div",{staticClass:"item"},[e._v(e._s(e.shopName1))]),e._v(" "),e._m(1)])]),e._v(" "),s("div",{ref:"watermarks",attrs:{id:"watermarks"}},[s("div",{staticClass:"alysis"},[e._m(2),e._v(" "),s("div",{staticClass:"search_wrap"},[s("div",{staticClass:"search"},[s("img",{staticClass:"pic1",attrs:{src:a("VwQC")},on:{click:function(t){return e.getcusinfo()}}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.custel,expression:"custel"}],attrs:{type:"search",placeholder:"请输入员工工号或姓名查找",id:"search"},domProps:{value:e.custel},on:{keyup:function(t){return"keyCode"in t&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getcusinfo()},input:function(t){t.target.composing||(e.custel=t.target.value)}}}),e._v(" "),s("img",{staticClass:"pic2",attrs:{src:a("3NZt")},on:{click:function(t){return e.deleteinfo()}}})])]),e._v(" "),s("div",{staticClass:"alysis_shuaixuan"},[s("div",{staticClass:"alysis_yuefen",on:{click:function(t){return t.stopPropagation(),e.selmonthshow()}}},[s("span",{class:""!=e.monthvalue?"active":""},[e._v(e._s(e.monthvalue)+"月")]),e._v("  "),s("em",{staticClass:"triangle_border_down"})]),e._v(" "),s("div",{staticClass:"alysis_yeji",on:{click:function(t){return t.stopPropagation(),e.selyejishow()}}},[s("span",{class:""!=e.yejivalue?"active":""},[e._v(e._s(e.yejivalue))]),e._v("  "),s("em",{staticClass:"triangle_border_down"})]),e._v(" "),s("div",{staticClass:"alysis_gangwei",on:{click:function(t){return t.stopPropagation(),e.selgangweishow()}}},[s("span",{class:""!=e.gangweivalue?"active":""},[e._v(e._s(""==e.gangweivalue?"岗位":e.gangweivalue))]),e._v("  "),s("em",{staticClass:"triangle_border_down"})])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.monthshow&&!e.yejishow&&!e.gangweishow,expression:"!monthshow && !yejishow && !gangweishow"}],staticClass:"fangline"}),e._v(" "),s("div",{staticClass:"yuefen_xuanze_wrap"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.monthshow,expression:"monthshow"}],staticClass:"fangyue",on:{click:e.fangyueme}},[s("div",{staticClass:"yuefen_xuanze clear"},e._l(e.yuearray,function(t,a){return s("div",{key:a,staticClass:"item",class:{active:t>e.monthvalue1,active1:t==e.monthvalue},on:{click:function(a){return a.stopPropagation(),e.selectmonth(t)}}},[e._v(e._s(t)+"月")])}),0)])]),e._v(" "),s("div",{staticClass:"yeji_xuanze_wrap"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.yejishow,expression:"yejishow"}],staticClass:"fangyue",on:{click:e.fangyueme}},[s("div",{staticClass:"yeji_xuanze clear"},[s("div",{staticClass:"xiaoshouyeji",class:"销售业绩"==e.yejivalue?"active":"",on:{click:function(t){return e.selectyeji("销售业绩")}}},[e._v("\r\n             销售业绩\r\n          ")]),e._v(" "),s("div",{staticClass:"xiaokaoyeji",class:"消耗业绩"==e.yejivalue?"active":"",on:{click:function(t){return e.selectyeji("消耗业绩")}}},[e._v("\r\n             消耗业绩\r\n          ")])])])]),e._v(" "),s("div",{staticClass:"gangwei_xuanze_wrap"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.gangweishow,expression:"gangweishow"}],staticClass:"fangyue",on:{click:e.fangyueme}},[s("div",{staticClass:"gangwei_xuanze clear"},e._l(e.gangweiarray,function(t,a){return s("div",{key:a,staticClass:"item",class:e.gangweivalue==t.titleName?"active":"",on:{click:function(a){return e.selectgangwei(t.titleName)}}},[e._v("\r\n             "+e._s(t.titleName)+"\r\n          ")])}),0)])])]),e._v(" "),s("div",{staticClass:"yejiranking"},[e._l(e.employeeData1,function(t,a){return""==e.gangweivalue||t.titleName==e.gangweivalue?s("div",{key:a,staticClass:"yejiitem",on:{click:function(a){return e.yejidetail(t.operid)}}},[s("div",{staticClass:"yejiitem_info clear"},[s("div",{staticClass:"xuhao"},[s("span",[e._v(e._s(a+1))])]),e._v(" "),s("div",{staticClass:"name"},[e._v("\r\n             "+e._s(t.opername)+"\r\n           ")]),e._v(" "),s("div",{staticClass:"xian"}),e._v(" "),s("div",{staticClass:"club"},[e._v("\r\n              "+e._s(t.name1)+"  \r\n           ")]),e._v(" "),s("div",{staticClass:"gangwei"},[s("span",{staticClass:"yuan"}),e._v("  "),s("span",{staticClass:"text"},[e._v(e._s(t.titleName))])])]),e._v(" "),s("div",{staticClass:"yejiitem_con clear"},[s("div",{staticClass:"item fz1"},[s("p",{staticClass:"numbe"},[s("span",[e._v(e._s("销售业绩"==e.yejivalue?t.sale_finish:t.use_finish))]),e._v("元")]),e._v(" "),s("p",{staticClass:"name"},[e._v(e._s("销售业绩"==e.yejivalue?"销售":"消耗")+"完成额")])]),e._v(" "),s("div",{staticClass:"item fz"},[s("p",{staticClass:"numbe"},[s("span",[e._v(e._s("销售业绩"==e.yejivalue?t.sale_task:t.use_task))]),e._v("元")]),e._v(" "),s("p",{staticClass:"name"},[e._v(e._s("销售业绩"==e.yejivalue?"销售":"消耗")+"目标额")])]),e._v(" "),s("div",{staticClass:"item fz"},[s("p",{staticClass:"numbe"},[s("span",[e._v(e._s("销售业绩"==e.yejivalue?t.sale_rs:t.use_rs))]),e._v("人")]),e._v(" "),s("p",{staticClass:"name"},[e._v(e._s("销售业绩"==e.yejivalue?"成交":"消费")+"人数    ")])]),e._v(" "),s("div",{staticClass:"item fz"},[s("div",{staticStyle:{width:"1rem",height:"1rem",position:"absolute",top:"-0.1rem",left:"10%"}},[s("x-circle",{attrs:{percent:"销售业绩"==e.yejivalue?parseInt(t.sale_fin_bl1.replace(/%/g,""))>=100?100:parseInt(t.sale_fin_bl1.replace(/%/g,"")):parseInt(t.use_fin_bl1.replace(/%/g,""))>=100?100:parseInt(t.use_fin_bl1.replace(/%/g,"")),"trail-width":6,"stroke-width":6,"trail-color":"#F7F7F7","stroke-color":"#FFAD39"}},[s("span",{staticStyle:{color:"#FFAD39","font-size":"0.2rem"}},[e._v(e._s("销售业绩"==e.yejivalue?t.sale_fin_bl1:t.use_fin_bl1))])])],1)]),e._v(" "),s("div",{staticClass:"item"})])]):e._e()}),e._v(" "),0==e.employeeData.length&&e.ksj?s("div",{staticClass:"noDate"},[e._v("无数据")]):e._e()],2)]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"msk",on:{click:function(t){return t.stopPropagation(),e.cancel(t)}}}),e._v(" "),s("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"stores"},[s("div",{staticClass:"regions"},e._l(e.storeNameList,function(t){return s("p",{key:t.clubId,class:t.clubName==e.shopName1?"active":"",on:{click:function(a){return a.stopPropagation(),e.selectShop(t.clubName,t.sysClubCode,t.sysClubCode)}}},[e._v(e._s(t.clubName))])}),0)])]),e._v(" "),s("transition",{attrs:{name:"slide",mode:"out-in"}},[s("router-view")],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"item"},[this._v("当前门店 "),t("span",{staticClass:"line"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"distance"},[t("img",{attrs:{src:a("lezY"),alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"currentStore",staticStyle:{padding:"0 4%"}},[t("div",{staticClass:"item",staticStyle:{"font-size":"0.34rem","font-weight":"bold","padding-right":"0.2rem"}},[t("span",{staticClass:"line lines"}),this._v("员工成绩排名")])])}]};var w=a("VU/8")(v,_,!1,function(e){a("vXFV")},"data-v-90a16c9e",null);t.default=w.exports},dUgK:function(e,t){},vXFV:function(e,t){}});