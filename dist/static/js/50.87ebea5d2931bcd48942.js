webpackJsonp([50],{B9EJ:function(t,a){},jlC7:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=i("mvHQ"),e=i.n(s),n={data:function(){return{index:0,topStatus:"",loading:0,show:!1,pageVal:1,pageSize:6,pageCount:1,isLoading:!1,isMoreLoading:!0,noMore:!1,selecttype:0,selecttypevalue:"",visitId:"",gonghao:"",quxiaohui:!1,getyuandailist:[],huishuaixuan1:!1,fangshuaixuanlist:[],huishuai:"",seachvue:"",datavalue:{pageFlag:!1,customerName:"",mobile:"",status:0},seachhuilist:[],checkedValue:[],shuairesultlist:[],dainodata:!1,flagactive:!1,fangscreen:!1,quxiaoyuanlist:[]}},created:function(){this.getgonghao(),this.fangshuaixuan()},methods:{getgonghao:function(){var t=this;this.instance.$post("/rest/wx/customer/getQyUser",{},function(a){console.log(a.rows[0].userName),t.gonghao=a.rows[0].userName,t.yuandaihui()})},yuandaihui:function(){var t=this;this.instance.$post("/rest/wx/customerGx/getVisitCustomerList ",{pageFlag:!0,pageNo:this.pageVal,pageSize:this.pageSize,name:this.gonghao,status:0},function(a){console.log(a),t.shuairesultlist=[],t.seachhuilist=[],1==t.loading&&(t.getyuandailist=[]),a.rows.forEach(function(a){t.getyuandailist.push(a)}),1==t.pageVal&&(t.$refs.loadmore.onTopLoaded(),0==a.rows.length?(t.show=!0,t.dainodata=!0):(t.show=!1,t.dainodata=!1)),t.pageCount=Math.ceil(a.total/t.pageSize),t.isMoreLoading=!1,t.isLoading=!1,t.loading=0},function(a){1==t.pageVal&&t.$refs.loadmore.onTopLoaded()})},cusdetail:function(t){this.$router.push({name:"customerDetail",query:{filid:t}})},suansure1:function(){var t=this;this.checkedValue.length>0?this.fangscreen=!0:this.fangscreen=!1,this.flagactive=!1,console.log(this.checkedValue.toString()),this.instance.$post("/rest/wx/customerGx/getVisitCustomerList",{pageFlag:!1,name:this.gonghao,status:0,type:this.checkedValue.toString()},function(a){t.noMore=!1,console.log(a),0==a.rows.length?t.dainodata=!0:t.dainodata=!1,t.getyuandailist=[],t.shuairesultlist=[],t.seachhuilist=[],a.rows.forEach(function(a){t.shuairesultlist.push(a)}),t.huishuaixuan1=!1,t.isLoading=!1})},searchmeth:function(){var t=this;if(console.log(this.seachvue),""==this.seachvue)return this.$vux.toast.text("请输入姓名或手机号码","center"),!1;if(isNaN(this.seachvue))this.datavalue.customerName=this.seachvue;else{if(11!=this.seachvue.length)return this.$vux.toast.text("输入手机号码不正确","center"),!1;this.datavalue.mobile=this.seachvue}console.log(this.datavalue),this.seachhuilist=[],this.instance.$post("/rest/wx/customerGx/getVisitCustomerList",{customerName:this.datavalue.customerName,mobile:this.datavalue.mobile,pageFlag:!1,status:0},function(a){t.getyuandailist=[],t.seachhuilist=[],t.shuairesultlist=[],t.noMore=!1,console.log(a),0==a.rows.length?t.dainodata=!0:t.dainodata=!1,a.rows.forEach(function(a){t.seachhuilist.push(a)}),console.log(t.seachhuilist)})},chongzhime:function(){this.checkedValue=[]},selectshuai:function(t,a){a.currentTarget;console.log(this.checkedValue)},tianjiahuifang:function(){this.$router.push({name:"yuannewhuifang",query:{gonghao:this.gonghao}})},huihistory:function(){this.$router.replace({name:"yuanlishi",query:{gonghao:this.gonghao}})},bugenmeth:function(){this.$router.replace({name:"bugenjin",query:{gonghao:this.gonghao}})},fangshuaixuan:function(){var t=this;this.instance.$post("/rest/wx/dictionnary/getDictionNaryTypeList",{typeCode:"visitType"},function(a){console.log(a.rows[0].dlist),a.rows[0].dlist.forEach(function(a){t.fangshuaixuanlist.push(a)}),t.quxiaoyuanyin()})},quxiaoyuanyin:function(){var t=this;this.instance.$post("/rest/wx/dictionnary/getDictionNaryTypeList",{typeCode:"refuse"},function(a){console.log("取消原因"),console.log(a),console.log(a.rows[0].dlist),a.rows[0].dlist.forEach(function(a){t.quxiaoyuanlist.push(a)})})},quxiaoshow:function(t){this.visitId=t,this.quxiaohui=!0},quxiaohide:function(){this.quxiaohui=!1,this.selecttype=0,this.selecttypevalue=""},huishuaixuan:function(){this.huishuaixuan1=!0,this.flagactive=!0},fselecttype:function(t,a){var i=a.currentTarget;console.log(i.checked),i.checked&&(console.log(1),this.selecttype=t,this.selecttypevalue=i.getAttribute("value"))},quhuisure:function(t){var a=this;""!=this.selecttypevalue?this.instance.$post("/rest/wx/customerGx/updateVisitCustomerGx ",{visitId:this.visitId,status:3,visitResult:"取消:"+this.selecttypevalue},function(t){console.log(e()(t)),t.status&&(a.quxiaohui=!1,a.getyuandailist=[],a.yuandaihui(),a.selecttype=0,a.selecttypevalue=""),a.$refs.loadmore.onTopLoaded()},function(t){a.$refs.loadmore.onTopLoaded()},t):this.$vux.toast.text("请选择原因","center")},dengjijieguo:function(t,a,i,s,e,n){this.$router.push({name:"yuandengjieg",query:{visitId:t,customerGxName:a,customerGxMobile:i,visitPlanDate:s,visitTypeName:e,remarks:n}})},shaihide:function(){this.huishuaixuan1=!1},handleTopChange:function(t){this.topStatus=t},loadTop:function(){var t=this;setTimeout(function(){t.pageVal=1,t.loading=1,t.getgonghao(1)},300)},loadMore:function(){if(0==this.seachhuilist.length&&0==this.shuairesultlist.length){if(this.pageVal+=1,this.isMoreLoading=!0,this.isLoading=!0,this.pageVal>this.pageCount)return this.isMoreLoading=!0,this.isLoading=!1,this.noMore=!0,0==this.getyuandailist.length&&(this.noMore=!1),!1;this.getgonghao(1)}}},components:{}},o={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container",class:{notScroll:t.flagactive}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.huishuaixuan1,expression:"huishuaixuan1"}],staticClass:"qi_home_shuai"},[s("div",{staticClass:"qi_home_shuai_con_left",on:{click:function(a){return t.shaihide()}}}),t._v(" "),s("div",{staticClass:"qi_home_shuai_con"},[t._l(t.fangshuaixuanlist,function(a,i){return s("div",{key:i,staticClass:"item"},[s("div",{staticClass:"itemp"},[s("em",[t._v(t._s(a.name))]),t._v(" "),s("span",{staticClass:"check_wrap"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedValue,expression:"checkedValue"}],attrs:{type:"checkbox",name:"fangch"},domProps:{value:a.dictionaryId,checked:Array.isArray(t.checkedValue)?t._i(t.checkedValue,a.dictionaryId)>-1:t.checkedValue},on:{click:function(a){return t.selectshuai(i,a)},change:function(i){var s=t.checkedValue,e=i.target,n=!!e.checked;if(Array.isArray(s)){var o=a.dictionaryId,c=t._i(s,o);e.checked?c<0&&(t.checkedValue=s.concat([o])):c>-1&&(t.checkedValue=s.slice(0,c).concat(s.slice(c+1)))}else t.checkedValue=n}}}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:-1!=t.checkedValue.toString().indexOf(a.dictionaryId),expression:"(checkedValue.toString()).indexOf(item.dictionaryId)!=-1"}],staticClass:"xuanzhong"}),t._v(" "),s("span",{staticClass:"noxuanzhong"})])])])}),t._v(" "),s("div",{staticClass:"qi_sure_wrap"})],2),t._v(" "),s("div",{staticClass:"qi_sure"},[s("div",{staticClass:"item",attrs:{id:"congzhi"},on:{click:function(a){return t.chongzhime()}}},[s("span",[t._v("重置")])]),t._v(" "),s("div",{staticClass:"item sure",attrs:{id:"suan_sure"},on:{click:function(a){return t.suansure1()}}},[s("span",[t._v("确定")])])])]),t._v(" "),s("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadTop,"max-distance":150},on:{"top-status-change":t.handleTopChange}},[s("div",{staticClass:"mint-loadmore-top",attrs:{slot:"top"},slot:"top"},[s("span",{directives:[{name:"show",rawName:"v-show",value:"pull"===t.topStatus,expression:"topStatus === 'pull'"}],class:{rotate:"drop"===t.topStatus}},[t._v("下拉刷新")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.topStatus,expression:"topStatus === 'loading'"}]},[s("mt-spinner",{staticClass:"loading-more",attrs:{type:"triple-bounce",size:20}})],1),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"drop"===t.topStatus,expression:"topStatus === 'drop'"}]},[t._v("松开刷新")])]),t._v(" "),s("div",{staticClass:"qi_hui_fang_wrap"},[s("div",{staticClass:"qi_hui_fang_header"},[s("div",{staticClass:"item daihuifang active"},[s("span",[t._v("等待回访")])]),t._v(" "),s("div",{staticClass:"item huifanglishi",on:{click:function(a){return t.huihistory()}}},[s("span",[t._v("回访历史")])]),t._v(" "),s("div",{staticClass:"item bugenjin",on:{click:function(a){return t.bugenmeth()}}},[s("span",[t._v("不跟进的客户")])])]),t._v(" "),s("div",{staticClass:"qi_hui_fang_con0"},[s("div",{staticClass:"qi_search_wrap"},[s("div",{staticClass:"seach"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.seachvue,expression:"seachvue"}],staticClass:"search_val0",attrs:{type:"text",placeholder:"请输入姓名/卡号/手机号码查找会员"},domProps:{value:t.seachvue},on:{input:function(a){a.target.composing||(t.seachvue=a.target.value)}}}),t._v(" "),s("span",{staticClass:"search_wrap huisearchbtn",on:{click:function(a){return t.searchmeth()}}},[s("em",[t._v("搜索")])])]),t._v(" "),s("div",{staticClass:"shuxian"},[s("span",{staticClass:"line"})]),t._v(" "),s("div",{staticClass:"shuaixuan",on:{click:function(a){return t.huishuaixuan()}}},[s("span",{class:{shuaixu:t.fangscreen}},[t._v("筛选")]),t._v("  \n            "),s("em",{staticClass:"triangle_border_down",class:{shuaixu1:t.fangscreen}})])]),t._v(" "),s("div",{staticClass:"qi_hui_data_list0"},t._l(t.seachhuilist.length>0?t.seachhuilist:t.shuairesultlist,function(a,e){return s("div",{key:e,staticClass:"qi_hui_fang_item"},[s("div",[s("div",{staticClass:"qi_hui_data"},[s("div",{staticClass:"mingcheng"},[s("img",{attrs:{src:i("Md7Z")}}),t._v("  \n                  "),s("span",[t._v(t._s(a.customerGxName))])]),t._v(" "),s("div",{staticClass:"fangvalue"},[t._v("\n                      \n                  "),s("a",{attrs:{href:"tel:"+a.customerGxMobile}},[t._v(t._s(a.customerGxMobile))])]),t._v(" "),s("div",{staticClass:"tian_huifang",on:{click:function(i){return i.stopPropagation(),t.dengjijieguo(a.visitId,a.customerGxName,a.customerGxMobile,a.visitPlanDate,a.visitTypeName,a.remarks)}}},[s("span",[t._v("填写回访")])])]),t._v(" "),s("div",{on:{click:function(i){return t.cusdetail(a.customerGxId)}}},[s("div",{staticClass:"qi_hui_data"},[s("div",{staticClass:"mingcheng1"},[t._v("回访日期：")]),t._v(" "),s("div",{staticClass:"fangvalue1"},[t._v(t._s(a.visitPlanDate?a.visitPlanDate.split(" ")[0]:""))])]),t._v(" "),s("div",{staticClass:"qi_hui_data"},[s("div",{staticClass:"mingcheng1"},[t._v("回访类型：")]),t._v(" "),s("div",{staticClass:"fangvalue1"},[t._v(t._s(a.visitTypeName))])]),t._v(" "),s("div",{staticClass:"qi_hui_data"},[s("div",{staticClass:"mingcheng1"},[t._v("\n                    备\n                    "),s("em",{staticStyle:{opacity:"0"}},[t._v("空格")]),t._v("注：\n                  ")]),t._v(" "),s("div",{staticClass:"fangvalue1"},[t._v(t._s(a.remarks))]),t._v(" "),s("div",{staticClass:"quxiao_huifang",on:{click:function(i){return i.stopPropagation(),t.quxiaoshow(a.visitId)}}},[s("span",[t._v("取消回访")])])])])])])}),0),t._v(" "),s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"datacontent",attrs:{"infinite-scroll-disabled":"isMoreLoading","infinite-scroll-immediate-check":!0,"infinite-scroll-distance":"10"}},[s("div",{staticClass:"qi_hui_data_list0"},t._l(t.getyuandailist,function(a,e){return s("div",{key:e,staticClass:"qi_hui_fang_item"},[s("div",[s("div",{staticClass:"qi_hui_data"},[s("div",{staticClass:"mingcheng"},[s("img",{attrs:{src:i("Md7Z")}}),t._v("  \n                    "),s("span",[t._v(t._s(a.customerGxName))])]),t._v(" "),s("div",{staticClass:"fangvalue"},[t._v("\n                       \n                    "),s("a",{attrs:{href:"tel:"+a.customerGxMobile}},[t._v(t._s(a.customerGxMobile))])]),t._v(" "),s("div",{staticClass:"tian_huifang",on:{click:function(i){return i.stopPropagation(),t.dengjijieguo(a.visitId,a.customerGxName,a.customerGxMobile,a.visitPlanDate,a.visitTypeName,a.remarks)}}},[s("span",[t._v("填写回访")])])]),t._v(" "),s("div",{on:{click:function(i){return t.cusdetail(a.customerGxId)}}},[s("div",{staticClass:"qi_hui_data"},[s("div",{staticClass:"mingcheng1"},[t._v("回访日期：")]),t._v(" "),s("div",{staticClass:"fangvalue1"},[t._v(t._s(a.visitPlanDate?a.visitPlanDate.split(" ")[0]:""))])]),t._v(" "),s("div",{staticClass:"qi_hui_data"},[s("div",{staticClass:"mingcheng1"},[t._v("回访类型：")]),t._v(" "),s("div",{staticClass:"fangvalue1"},[t._v(t._s(a.visitTypeName))])]),t._v(" "),s("div",{staticClass:"qi_hui_data"},[s("div",{staticClass:"mingcheng1"},[t._v("\n                      备\n                      "),s("em",{staticStyle:{opacity:"0"}},[t._v("空格")]),t._v("注：\n                    ")]),t._v(" "),s("div",{staticClass:"fangvalue1"},[t._v(t._s(a.remarks))]),t._v(" "),s("div",{staticClass:"quxiao_huifang",on:{click:function(i){return i.stopPropagation(),t.quxiaoshow(a.visitId)}}},[s("span",[t._v("取消回访")])])])])])])}),0),t._v(" "),t.isLoading?s("div",{staticClass:"loading-box tc"},[s("mt-spinner",{staticClass:"loading-more",attrs:{type:"fading-circle",size:20}}),t._v(" "),s("span",{staticClass:"loading-more-txt"},[t._v("加载中...")])],1):t._e(),t._v(" "),t.noMore?s("div",{staticClass:"no-more"},[t._v("没有更多数据了")]):t._e()]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.dainodata,expression:"dainodata"}],staticClass:"zanwujilu"},[s("div",{staticClass:"title"},[t._v("暂无数据")])])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.quxiaohui,expression:"quxiaohui"}],staticClass:"quxiao_tanchuang"},[s("div",{staticClass:"tuanchuang_wrap"},[s("div",{staticClass:"tuanchuang_header"},[s("span",[t._v("是否取消回访？")])]),t._v(" "),s("div",{staticClass:"tuanchuang_con"},t._l(t.quxiaoyuanlist,function(a,i){return s("div",{key:i,staticClass:"item"},[s("em",[t._v(t._s(a.name))]),t._v(" "),s("span",{staticClass:"check_wrap"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selecttypevalue,expression:"selecttypevalue"}],attrs:{type:"radio",name:"rufangjian"},domProps:{value:a.name,checked:t._q(t.selecttypevalue,a.name)},on:{change:function(i){t.selecttypevalue=a.name}}}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:a.name==t.selecttypevalue,expression:"item.name==selecttypevalue"}],staticClass:"xuanzhong"}),t._v(" "),s("span",{staticClass:"noxuanzhong"})])])}),0),t._v(" "),s("div",{staticClass:"tuanchuang_bottom"},[s("div",{staticClass:"fangfou",on:{click:function(a){return t.quxiaohide()}}},[s("span",{staticStyle:{"font-size":"0.3rem",color:"#1D1D1D"}},[t._v("再想想")])]),t._v(" "),s("div",{staticClass:"fangsure",attrs:{id:"quxiaohuif_sure"},on:{click:function(a){return t.quhuisure()}}},[s("span",{staticStyle:{"font-size":"0.3rem",color:"#1D1D1D"}},[t._v("确定")])])]),t._v(" "),s("div",{staticClass:"tuanchuang_close",on:{click:function(a){return t.quxiaohide()}}},[s("img",{attrs:{src:i("0CBg")}})])])])]),t._v(" "),s("div",{staticClass:"tianjia",on:{click:function(a){return t.tianjiahuifang()}}})],1)},staticRenderFns:[]};var c=i("VU/8")(n,o,!1,function(t){i("B9EJ")},"data-v-73febc04",null);a.default=c.exports}});