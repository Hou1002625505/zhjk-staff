webpackJsonp([81],{"/9d0":function(t,e){},Y7Yu:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,n,i=a("bOdI"),o=a.n(i),r=a("mvHQ"),l=a.n(r),c=a("4kSj"),h=a.n(c);s={data:function(){return{tabflag:1,yuefenlist:[],fang:{realDate:1,showDate:"历史记录查询"},selectmonthvalue:""}},created:function(){this.select_moths()},mounted:function(){},methods:{select_moths:function(){var t=this;this.instance.$post("/rest/wx/perfor/getPerformanceDate",{},function(e){console.log(e),t.yuefenlist=e,t.yuefenlist.unshift(t.fang),t.yesterday_res()})},yesterday_res:function(){this.relust_check({type:"2",date:"201712"},"#sales-result","#expend-result")},currentMonth_res:function(){this.relust_check({type:"3",date:"201711"},"#month-sale","#month-expend")},relust_check:function(t,e,a){var s=this;h.a.ajax({type:"post",url:s.config.service_ip+"/rest/wx/perfor/getPerformanceList",async:!0,data:l()(t),contentType:"application/json;charset=UTF-8",dataType:"json",xhrFields:{withCredentials:!0},success:function(t){if(console.log(t),h()("#opercode").html(t[0].opercode),h()("#operName").html(t[0].operName),1==t.length&&null==t[0].option_name)return s.$vux.toast.text("无当前业绩","center"),void h()(".searchDetail").hide();h()(".searchDetail").show();var n=h()(e),i=h()(a),o=0,r=0,l=0,c=0,d=0,u=0;if(h.a.each(t,function(t,e){var a="",s="";o+=e.price7,r+=e.price11,l+=e.price1,c+=e.price3,u+=e.price2,0!=e.price2&&(a="<tr><td class='xiaohao'>消耗业绩</td><td class='fontColor'>"+e.option_name+"</td><td class='pl fontColor'>"+e.price2.formatMoney(2,"",",",".")+"</td></tr>;",i.append(a)),0!=e.price3&&(s="<tr><td class='xiaoshou'>销售业绩</td><td class='fontColor'>"+e.option_name+"</td><td class='pl fontColor'>"+e.price3.formatMoney(2,"",",",".")+"</td></tr>;",n.append(s))}),0!=o){n.append("<tr><td class='xiaoshou'>销售业绩</td><td class='fontColor'>当天配合私教</td><td class='date_coach fontColor'></td></tr>"),h()(".date_coach").html(o.formatMoney(2,"",",","."))}if(0!=r){n.append("<tr><td class='xiaoshou'>销售业绩</td><td class='fontColor'>当月配合私教</td><td class='month_coach fontColor'></td></tr>"),h()(".month_coach").html(r.formatMoney(2,"",",","."))}if(s._w_table_rowspan(".grid_data",1),0!=l){i.append("<tr><td>固定提成</td><td></td><td  class='ticheng pl'></td></tr>"),h()(".ticheng").html(l.formatMoney(2,"",",","."))}d=parseInt(o)+parseInt(r)+parseInt(c),0==u?h()(".xiaohao").html("消耗业绩"):h()(".xiaohao").html("消耗业绩</br>"+u.formatMoney(2,"",",",".")),0==d?h()(".xiaoshou").html("销售业绩"):h()(".xiaoshou").html("销售业绩</br>"+d.formatMoney(2,"",",","."))},error:function(){s.$vux.toast.text("网络请求失败")},complete:function(){}})},_w_table_rowspan:function(t,e){var a="",s="",n=0;h()(t+" tr td:nth-child("+e+")").each(function(t){0==t?(a=h()(this),n=1):(s=h()(this),a.text()==s.text()?(n++,s.hide(),a.attr("rowspan",n)):(a=h()(this),n=1))})},selectflag:function(t){this.tabflag=t,h()("#sales-result").html(""),h()("#expend-result").html(""),this.yesterday_res(),h()("#preDate").show(),h()("#self_month").hide(),h()("#current_month").hide()},curren_month:function(t){this.tabflag=t,h()("#month-sale").html(""),h()("#month-expend").html(""),this.currentMonth_res(),h()("#preDate").hide(),h()("#self_month").hide(),h()("#current_month").show()},curren_month1:function(t){this.tabflag=t},selectmonth:function(t){this.selectmonthvalue=t.target.value;var e=t.target.value;if(1!=e){h()("#preDate").hide(),h()("#current_month").hide(),h()("#self_month").show(),h()("#selfMonth-sale").html(""),h()("#selfMonth_expend").html(""),this._w_table_rowspan("#selfMonth_sale",1),this._w_table_rowspan("#selfMonth_expend",1);var a={type:"4",date:e};this.relust_check(a,"#selfMonth-sale","#selfMonth_expend")}},chayejidetail:function(t){2==t||3==t?this.$router.push({name:"yejidetail",query:{detailtype:t}}):this.$router.push({name:"yejidetail",query:{detailtype:t,selfmouth:this.selectmonthvalue}})}}},o()(s,"mounted",function(){}),o()(s,"updated",function(){}),o()(s,"components",{});h()("#predate_detail").click(function(){location.href="Performance_details.html?type=2"}),h()("#selfmonth_detail").click(function(){var t=h()("#groupType").val();location.href="Performance_details.html?value="+t+"&type=4"}),h()("#currentmoth_detail").click(function(){location.href="Performance_details.html?type=3"}),Number.prototype.formatMoney=function(t,e,a,s){t=isNaN(t=Math.abs(t))?2:t,e=void 0!==e?e:"$",a=a||",",s=s||".";var n=this,i=n<0?"-":"",o=parseInt(n=Math.abs(+n||0).toFixed(t),10)+"",r=(r=o.length)>3?r%3:0;return e+i+(r?o.substr(0,r)+a:"")+o.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+a)+(t?s+Math.abs(n-o).toFixed(t).slice(2):"")};var d=(n={data:function(){return{tabflag:1,yuefenlist:[],fang:{realDate:1,showDate:"历史记录查询"},selectmonthvalue:""}},created:function(){this.select_moths()},mounted:function(){},methods:{select_moths:function(){var t=this;this.instance.$post("/rest/wx/perfor/getPerformanceDate",{},function(e){console.log(e),t.yuefenlist=e,t.yuefenlist.unshift(t.fang),t.yesterday_res()})},yesterday_res:function(){this.relust_check({type:"2",date:"201712"},"#sales-result","#expend-result")},currentMonth_res:function(){this.relust_check({type:"3",date:"201711"},"#month-sale","#month-expend")},relust_check:function(t,e,a){var s=this;h.a.ajax({type:"post",url:s.config.service_ip+"/rest/wx/perfor/getPerformanceList",async:!0,data:l()(t),contentType:"application/json;charset=UTF-8",dataType:"json",xhrFields:{withCredentials:!0},success:function(t){if(console.log(t),h()("#opercode").html(t[0].opercode),h()("#operName").html(t[0].operName),1==t.length&&null==t[0].option_name)return s.$vux.toast.text("无当前业绩","center"),void h()(".searchDetail").hide();h()(".searchDetail").show();var n=h()(e),i=h()(a),o=0,r=0,l=0,c=0,d=0,u=0;if(h.a.each(t,function(t,e){var a="",s="";o+=e.price7,r+=e.price11,l+=e.price1,c+=e.price3,u+=e.price2,0!=e.price2&&(a="<tr><td class='xiaohao'>消耗业绩</td><td class='fontColor'>"+e.option_name+"</td><td class='pl fontColor'>"+e.price2.formatMoney(2,"",",",".")+"</td></tr>;",i.append(a)),0!=e.price3&&(s="<tr><td class='xiaoshou'>销售业绩</td><td class='fontColor'>"+e.option_name+"</td><td class='pl fontColor'>"+e.price3.formatMoney(2,"",",",".")+"</td></tr>;",n.append(s))}),0!=o){n.append("<tr><td class='xiaoshou'>销售业绩</td><td class='fontColor'>当天配合私教</td><td class='date_coach fontColor'></td></tr>"),h()(".date_coach").html(o.formatMoney(2,"",",","."))}if(0!=r){n.append("<tr><td class='xiaoshou'>销售业绩</td><td class='fontColor'>当月配合私教</td><td class='month_coach fontColor'></td></tr>"),h()(".month_coach").html(r.formatMoney(2,"",",","."))}if(s._w_table_rowspan(".grid_data",1),0!=l){i.append("<tr><td>固定提成</td><td></td><td  class='ticheng pl'></td></tr>"),h()(".ticheng").html(l.formatMoney(2,"",",","."))}d=parseInt(o)+parseInt(r)+parseInt(c),0==u?h()(".xiaohao").html("消耗业绩"):h()(".xiaohao").html("消耗业绩</br>"+u.formatMoney(2,"",",",".")),0==d?h()(".xiaoshou").html("销售业绩"):h()(".xiaoshou").html("销售业绩</br>"+d.formatMoney(2,"",",","."))},error:function(){s.$vux.toast.text("网络请求失败")},complete:function(){}})},_w_table_rowspan:function(t,e){var a="",s="",n=0;h()(t+" tr td:nth-child("+e+")").each(function(t){0==t?(a=h()(this),n=1):(s=h()(this),a.text()==s.text()?(n++,s.hide(),a.attr("rowspan",n)):(a=h()(this),n=1))})},selectflag:function(t){this.tabflag=t,h()("#sales-result").html(""),h()("#expend-result").html(""),this.yesterday_res(),h()("#preDate").show(),h()("#self_month").hide(),h()("#current_month").hide()},curren_month:function(t){this.tabflag=t,h()("#month-sale").html(""),h()("#month-expend").html(""),this.currentMonth_res(),h()("#preDate").hide(),h()("#self_month").hide(),h()("#current_month").show()},curren_month1:function(t){this.tabflag=t},selectmonth:function(t){this.selectmonthvalue=t.target.value;var e=t.target.value;if(1!=e){h()("#preDate").hide(),h()("#current_month").hide(),h()("#self_month").show(),h()("#selfMonth-sale").html(""),h()("#selfMonth_expend").html(""),this._w_table_rowspan("#selfMonth_sale",1),this._w_table_rowspan("#selfMonth_expend",1);var a={type:"4",date:e};this.relust_check(a,"#selfMonth-sale","#selfMonth_expend")}},chayejidetail:function(t){2==t||3==t?this.$router.push({name:"yejidetail",query:{detailtype:t}}):this.$router.push({name:"yejidetail",query:{detailtype:t,selfmouth:this.selectmonthvalue}})}}},o()(n,"mounted",function(){}),o()(n,"updated",function(){}),o()(n,"components",{}),n);h()("#predate_detail").click(function(){location.href="Performance_details.html?type=2"}),h()("#selfmonth_detail").click(function(){var t=h()("#groupType").val();location.href="Performance_details.html?value="+t+"&type=4"}),h()("#currentmoth_detail").click(function(){location.href="Performance_details.html?type=3"}),Number.prototype.formatMoney=function(t,e,a,s){t=isNaN(t=Math.abs(t))?2:t,e=void 0!==e?e:"$",a=a||",",s=s||".";var n=this,i=n<0?"-":"",o=parseInt(n=Math.abs(+n||0).toFixed(t),10)+"",r=(r=o.length)>3?r%3:0;return e+i+(r?o.substr(0,r)+a:"")+o.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+a)+(t?s+Math.abs(n-o).toFixed(t).slice(2):"")};var u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"yeji_wrap"},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("div",{attrs:{id:"performance"}},[a("section",{staticClass:"mg-05"},[a("div",{staticClass:"weui-flex"},[a("div",{staticClass:"weui-flex__item tab preDate",class:{active:1===t.tabflag},on:{click:function(e){return t.selectflag(1)}}},[t._v("\n\t\t\t\t\t\t昨天\n\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"yejiitem1"}),t._v(" "),a("div",{staticClass:"weui-flex__item tab ",class:{active:2===t.tabflag},attrs:{id:"curren_month"},on:{click:function(e){return t.curren_month(2)}}},[t._v("本月")]),t._v(" "),a("div",{staticClass:"yejiitem1"}),t._v(" "),a("div",{staticClass:"weui-flex__item tab",class:{active:3===t.tabflag},attrs:{id:"month_box"},on:{click:function(e){return t.curren_month1(3)}}},[a("select",{staticClass:"sl_month",attrs:{id:"groupType"},on:{change:function(e){return t.selectmonth(e)}}},t._l(t.yuefenlist,function(e,s){return a("option",{key:s,domProps:{value:e.realDate}},[t._v(t._s(e.showDate))])}),0)])])]),t._v(" "),a("div",{attrs:{id:"preDate"}},[t._m(2),t._v(" "),t._m(3),t._v(" "),a("div",{staticClass:"searchDetail"},[a("span",{attrs:{id:"predate_detail"},on:{click:function(e){return t.chayejidetail(2)}}},[t._v("查看业绩明细")])])]),t._v(" "),a("div",{staticStyle:{display:"none"},attrs:{id:"current_month"}},[t._m(4),t._v(" "),t._m(5),t._v(" "),a("div",{staticClass:"searchDetail"},[a("span",{attrs:{id:"currentmoth_detail"},on:{click:function(e){return t.chayejidetail(3)}}},[t._v("查看业绩明细")])])]),t._v(" "),a("div",{staticStyle:{display:"none"},attrs:{id:"self_month"}},[t._m(6),t._v(" "),t._m(7),t._v(" "),a("div",{staticClass:"searchDetail"},[a("span",{attrs:{id:"selfmonth_detail"},on:{click:function(e){return t.chayejidetail(4)}}},[t._v("查看业绩明细")])])]),t._v(" "),t._m(8),t._v(" "),a("div",{staticStyle:{height:"1rem"},attrs:{id:"yejistyle"}})])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("div",{staticClass:"tab_box",staticStyle:{display:"none"}},[e("div",{staticClass:"control_span"},[e("span",{staticClass:"active tab check_yj"},[this._v("业绩查询")]),this._v(" "),e("span",{staticClass:" check_salary"},[this._v("工资查询")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"person-sec"},[e("div",{staticClass:"weui-flex"},[e("div",{staticClass:"weui-flex__item"},[e("span",[this._v("员工编号:")]),this._v(" "),e("span",{attrs:{id:"opercode"}})]),this._v(" "),e("div",{staticClass:"yejiitem"}),this._v(" "),e("div",{staticClass:"weui-flex__item"},[e("span",[this._v("员工姓名:")]),this._v(" "),e("span",{attrs:{id:"operName"}})])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("table",{staticClass:"grid_data",attrs:{id:"sales"}},[e("thead",[e("tr",[e("th",[this._v("业绩类型")]),this._v(" "),e("th",[this._v("业绩类别")]),this._v(" "),e("th",{staticClass:"pl"},[this._v("业绩金额")])])]),this._v(" "),e("tbody",{attrs:{id:"sales-result"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("table",{staticClass:"grid_data",attrs:{id:"expend"}},[e("tbody",{attrs:{id:"expend-result"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("table",{staticClass:"grid_data",attrs:{id:"month-tb"}},[e("thead",[e("tr",[e("th",[this._v("业绩类型")]),this._v(" "),e("th",[this._v("业绩类别")]),this._v(" "),e("th",{staticClass:"pl"},[this._v("业绩金额")])])]),this._v(" "),e("tbody",{attrs:{id:"month-sale"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("table",{staticClass:"grid_data"},[e("tbody",{attrs:{id:"month-expend"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("table",{staticClass:"grid_data",attrs:{id:"selfMonth_sale"}},[e("thead",[e("tr",[e("th",[this._v("业绩类型")]),this._v(" "),e("th",[this._v("业绩类别")]),this._v(" "),e("th",{staticClass:"pl"},[this._v("业绩金额")])])]),this._v(" "),e("tbody",{attrs:{id:"selfMonth-sale"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("table",{staticClass:"grid_data",attrs:{id:"selfMonth_expend"}},[e("tbody",{attrs:{id:"selfMonth-expend"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"warn"},[e("span",[this._v("本月业绩截止至昨天")])])}]};var _=a("VU/8")(d,u,!1,function(t){a("/9d0")},null,null);e.default=_.exports}});