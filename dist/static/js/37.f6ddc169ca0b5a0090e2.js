webpackJsonp([37],{EoKZ:function(t,e){},yUb4:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),i=a.n(s),n={data:function(){return{filid:this.$route.query.filid,index:"",topStatus:"",loading:0,show:!1,pageVal:1,pageSize:10,pageCount:1,isLoading:!1,isMoreLoading:!0,noMore:!1,gethetongList:[],nameshow:-1,nodatazan:!1,quxiaohui:!1,quxiaoyuanlist:[],selecttypevalue:"",hetongceid:"",textareavalue:"",textareavalueflag:!1,fangtop:"20%"}},created:function(){var t=document.documentElement.clientHeight||document.body.clientHeight;window.onresize=function(){var e=document.documentElement.clientHeight||document.body.clientHeight;this.fangtop=t-e>60?0:"20%"},this.gethetongval(),this.quxiaoyuanyin()},methods:{quxiaoyuanyin:function(){var t=this;this.instance.$post("/rest/wx/dictionnary/getDictionNaryTypeList",{typeCode:"HTCX"},function(e){console.log("取消原因"),console.log(e),console.log(e.rows[0].dlist),e.rows[0].dlist.forEach(function(e){"其他"==e.name?t.quxiaoyuanlist.push(e):t.quxiaoyuanlist.unshift(e)})})},quxiaoshow:function(t){this.hetongceid=t,this.quxiaohui=!0,this.textareavalueflag=!1,this.textareavalue=""},quxiaohide:function(){this.quxiaohui=!1,this.selecttypevalue=""},quhuisure:function(t){var e=this;if(""!=this.selecttypevalue){if("其他"==this.selecttypevalue){if(""==this.textareavalue)return this.$vux.toast.text("请填写原因","center"),!1;this.selecttypevalue=this.textareavalue}this.instance.$post("/rest/wx/customerGx/cancellationStatemen",{tid:this.hetongceid,type:this.selecttypevalue},function(t){console.log(i()(t)),t.status&&(e.pageVal=1,e.quxiaohui=!1,e.gethetongList=[],e.gethetongval(),e.selecttypevalue=""),e.$refs.loadmore.onTopLoaded()},function(t){e.$refs.loadmore.onTopLoaded()},t)}else this.$vux.toast.text("请选择原因","center")},fangfuck:function(){"其他"==this.selecttypevalue?this.textareavalueflag=!0:this.textareavalueflag=!1},filDate:function(t){return t.split(" ")[0]},gethetongval:function(t){var e=this;this.instance.$post("/rest/wx/customerGx/getCustomerStatementList",{pageFlag:!0,pageNo:this.pageVal,pageSize:this.pageSize,fldclientid:this.filid},function(t){console.log(t),1==e.pageVal&&(e.$refs.loadmore.onTopLoaded(),0==t.rows.length?(e.show=!0,e.nodatazan=!0):(e.show=!1,e.nodatazan=!1)),1==e.loading&&(e.gethetongList=[]),t.rows.forEach(function(t){e.gethetongList.push(t)}),e.pageCount=Math.ceil(t.total/e.pageSize),e.isMoreLoading=!1,e.isLoading=!1,e.loading=0},function(t){1==e.pageVal&&e.$refs.loadmore.onTopLoaded()},t)},htdetail:function(t){this.$router.push({name:"hetongdetail",query:{tid:t}})},productshow:function(t){this.nameshow!=t?this.nameshow=t:this.nameshow=999},tianjiaht:function(){this.$router.push({name:"goumaiht",query:{filid:this.filid}})},handleTopChange:function(t){this.topStatus=t},loadTop:function(){var t=this;setTimeout(function(){t.pageVal=1,t.loading=1,t.gethetongval(1)},300)},loadMore:function(){if(this.pageVal+=1,this.isMoreLoading=!0,this.isLoading=!0,this.pageVal>this.pageCount)return this.isMoreLoading=!0,this.isLoading=!1,this.noMore=!0,0==this.yyList.length&&(this.noMore=!1),!1;this.gethetongval(1)}},watch:{$route:function(t,e){2==e.meta.slide&&(this.pageVal=1,this.loading=1,this.gethetongval(),e.meta.slide=1)}},components:{}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadTop,"max-distance":150},on:{"top-status-change":t.handleTopChange}},[s("div",{staticClass:"mint-loadmore-top",attrs:{slot:"top"},slot:"top"},[s("span",{directives:[{name:"show",rawName:"v-show",value:"pull"===t.topStatus,expression:"topStatus === 'pull'"}],class:{rotate:"drop"===t.topStatus}},[t._v("下拉刷新")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.topStatus,expression:"topStatus === 'loading'"}]},[s("mt-spinner",{staticClass:"loading-more",attrs:{type:"triple-bounce",size:20}})],1),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"drop"===t.topStatus,expression:"topStatus === 'drop'"}]},[t._v("松开刷新")])]),t._v(" "),s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"datacontent",attrs:{"infinite-scroll-disabled":"isMoreLoading","infinite-scroll-immediate-check":!0,"infinite-scroll-distance":"10"}},[s("div",{staticClass:"qi_hui_fang_wrap"},[s("div",{staticClass:"qi_hui_fang_con1"},t._l(t.gethetongList,function(e,a){return s("div",{key:a,staticClass:"qi_hui_fang_item",on:{click:function(a){return t.htdetail(e.customerStatement.statementId)}}},[s("div",{staticClass:"chanpin_ming"},[s("div",{staticClass:"channame"},[t._v("产品名称：")]),t._v(" "),s("div",{staticClass:"fangvalue6"},[s("p",{directives:[{name:"show",rawName:"v-show",value:t.nameshow!=a,expression:"nameshow!=index"}]},[t._v(t._s(e.products[0].productName))]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.nameshow==a,expression:"nameshow==index"}],staticClass:"p_wrap"},t._l(e.products,function(e,a){return s("p",{key:a},[t._v(t._s(e.productName))])}),0)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.products.length>1,expression:"item.products.length>1"}],staticClass:"jiantou",class:t.nameshow==a?"fangarrow1":"fangarrow",on:{click:function(e){return e.stopPropagation(),t.productshow(a)}}})]),t._v(" "),s("div",{staticClass:"qi_hui_data"},[s("div",{staticClass:"mingcheng1"},[t._v("合同编号：")]),t._v(" "),s("div",{staticClass:"fangvalue1"},[t._v(t._s(e.customerStatement.statementCode))])]),t._v(" "),s("div",{staticClass:"qi_hui_data"},[s("div",{staticClass:"mingcheng1"},[t._v("合计金额：")]),t._v(" "),s("div",{staticClass:"fangvalue1"},[t._v(t._s(e.methods[0].payAmount)+".00元")])]),t._v(" "),s("div",{staticClass:"qi_hui_data",staticStyle:{"padding-bottom":"0.2rem"}},[s("div",{staticClass:"mingcheng1"},[t._v("合同日期：")]),t._v(" "),s("div",{staticClass:"fangvalue1"},[t._v(t._s(t.filDate(e.customerStatement.createDate)))]),t._v(" "),s("div",{staticClass:"hetongcexiao",class:{fangactiv:0==e.customerStatement.status},on:{click:function(a){a.stopPropagation(),1==e.customerStatement.status&&t.quxiaoshow(e.customerStatement.statementId)}}},[t._v(t._s(1==e.customerStatement.status?"撤销合同":2==e.customerStatement.status?"等待确认":0==e.customerStatement.status?"合同失效":""))])])])}),0)])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.nodatazan,expression:"nodatazan"}],staticClass:"zanwujilu"},[s("div",{staticClass:"title"},[t._v("暂无数据")])]),t._v(" "),s("div",{staticClass:"tianjia",on:{click:function(e){return t.tianjiaht()}}})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.quxiaohui,expression:"quxiaohui"}],staticClass:"quxiao_tanchuang",attrs:{id:"apply"}},[s("div",{staticClass:"tuanchuang_wrap",style:{top:t.fangtop}},[t._m(0),t._v(" "),s("div",{staticClass:"tuanchuang_con"},[t._l(t.quxiaoyuanlist,function(e,a){return s("div",{key:a,staticClass:"item"},[s("em",[t._v(t._s(e.name))]),t._v(" "),s("span",{staticClass:"check_wrap"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selecttypevalue,expression:"selecttypevalue"}],attrs:{type:"radio",name:"rufangjian"},domProps:{value:e.name,checked:t._q(t.selecttypevalue,e.name)},on:{change:[function(a){t.selecttypevalue=e.name},t.fangfuck]}}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.name==t.selecttypevalue,expression:"item.name==selecttypevalue"}],staticClass:"xuanzhong"}),t._v(" "),s("span",{staticClass:"noxuanzhong"})])])}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.textareavalueflag,expression:"textareavalueflag"}],staticClass:"textarea_wrap"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textareavalue,expression:"textareavalue"}],attrs:{maxlength:"100",placeholder:"请填写其他原因"},domProps:{value:t.textareavalue},on:{input:function(e){e.target.composing||(t.textareavalue=e.target.value)}}})])],2),t._v(" "),s("div",{staticClass:"tuanchuang_bottom"},[s("div",{staticClass:"fangfou",on:{click:function(e){return t.quxiaohide()}}},[s("span",{staticStyle:{"font-size":"0.3rem",color:"#1D1D1D"}},[t._v("再想想")])]),t._v(" "),s("div",{staticClass:"fangsure",attrs:{id:"quxiaohuif_sure"},on:{click:function(e){return t.quhuisure()}}},[s("span",{staticStyle:{"font-size":"0.3rem",color:"#1D1D1D"}},[t._v("确定")])])]),t._v(" "),s("div",{staticClass:"tuanchuang_close",on:{click:function(e){return t.quxiaohide()}}},[s("img",{attrs:{src:a("0CBg")}})])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tuanchuang_header"},[e("span",[this._v("请选择撤销原因")])])}]};var l=a("VU/8")(n,o,!1,function(t){a("EoKZ")},"data-v-e2dfab1a",null);e.default=l.exports}});