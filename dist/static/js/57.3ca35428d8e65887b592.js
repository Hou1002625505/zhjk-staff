webpackJsonp([57],{dc1B:function(i,t){},frpq:function(i,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mvHQ"),e=a.n(s),n={data:function(){return{filid:this.$route.query.filid,index:0,topStatus:"",loading:0,show:!1,pageVal:1,pageSize:6,pageCount:1,isLoading:!1,isMoreLoading:!0,noMore:!1,selecttype:0,selecttypevalue:"",visitId:"",gonghao:"",quxiaohui:!1,getyuandailist:[],huishuaixuan1:!1,fangshuaixuanlist:[],huishuai:"",seachvue:"",datavalue:{pageFlag:!1,customerName:"",mobile:"",status:0},seachhuilist:[],checkedValue:[],shuairesultlist:[],zanwushow:!1,flagactive:!1,fangscreen:!1,quxiaoyuanlist:[]}},created:function(){this.yuandaihui(),this.fangshuaixuan()},methods:{yuandaihui:function(i){var t=this;this.instance.$post("/rest/wx/customerGx/getVisitCustomerList ",{pageFlag:!0,pageNo:this.pageVal,pageSize:this.pageSize,userId:this.filid,status:0},function(i){console.log(i),1==t.pageVal&&(t.$refs.loadmore.onTopLoaded(),0==i.rows.length?(t.zanwushow=!0,t.show=!0):(t.show=!1,t.zanwushow=!1)),1==t.loading&&(t.getyuandailist=[]),i.rows.forEach(function(i){t.getyuandailist.push(i)}),t.pageCount=Math.ceil(i.total/t.pageSize),t.isMoreLoading=!1,t.isLoading=!1,t.loading=0},function(i){1==t.pageVal&&t.$refs.loadmore.onTopLoaded()},i)},chongzhime:function(){this.checkedValue=[]},suansure1:function(){var i=this;this.checkedValue.length>0?this.fangscreen=!0:this.fangscreen=!1,this.flagactive=!1,console.log(this.checkedValue.toString()),this.instance.$post("/rest/wx/customerGx/getVisitCustomerList",{pageFlag:!1,userId:this.filid,status:0,type:this.checkedValue.toString()},function(t){i.noMore=!1,console.log(t),0==t.rows.length?i.zanwushow=!0:i.zanwushow=!1,i.shuairesultlist=[],i.getyuandailist=[],t.rows.forEach(function(t){i.shuairesultlist.push(t)}),i.huishuaixuan1=!1})},shaihide:function(){this.huishuaixuan1=!1},selectshuai:function(i,t){t.currentTarget;console.log(this.checkedValue)},tianjiahuifang1:function(){this.$router.push({name:"newhuifang",query:{filid:this.filid}})},huifanglish:function(){this.$router.push({name:"kehuilishi",query:{filid:this.filid}})},fangshuaixuan:function(){var i=this;this.instance.$post("/rest/wx/dictionnary/getDictionNaryTypeList",{typeCode:"visitType"},function(t){console.log(t.rows[0].dlist),t.rows[0].dlist.forEach(function(t){i.fangshuaixuanlist.push(t)}),i.quxiaoyuanyin()})},quxiaoyuanyin:function(){var i=this;this.instance.$post("/rest/wx/dictionnary/getDictionNaryTypeList",{typeCode:"refuse"},function(t){console.log("取消原因"),console.log(t),console.log(t.rows[0].dlist),t.rows[0].dlist.forEach(function(t){i.quxiaoyuanlist.push(t)})})},quxiaoshow:function(i){this.visitId=i,this.quxiaohui=!0},quxiaohide:function(){this.quxiaohui=!1,this.selecttype=0,this.selecttypevalue=""},huishuaixuan:function(){this.huishuaixuan1=!0,this.flagactive=!0},fselecttype:function(i,t){var a=t.currentTarget;console.log(a.checked),a.checked&&(console.log(1),this.selecttype=i,this.selecttypevalue=a.getAttribute("value"))},quhuisure:function(i){var t=this;""!=this.selecttypevalue?this.instance.$post("/rest/wx/customerGx/updateVisitCustomerGx ",{visitId:this.visitId,status:3,visitResult:"取消:"+this.selecttypevalue},function(i){console.log(e()(i)),i.status&&(t.quxiaohui=!1,t.getyuandailist=[],t.yuandaihui(),t.selecttype=0,t.selecttypevalue=""),t.$refs.loadmore.onTopLoaded()},function(i){t.$refs.loadmore.onTopLoaded()},i):this.$vux.toast.text("请选择原因","center")},dengjijieguo:function(i,t,a,s,e,n){this.$router.push({name:"yuandengjieg",query:{visitId:i,customerGxName:t,customerGxMobile:a,visitPlanDate:s,visitTypeName:e,remarks:n,kedaihuifang:1,filid:this.filid}})},handleTopChange:function(i){this.topStatus=i},loadTop:function(){var i=this;setTimeout(function(){i.pageVal=1,i.loading=1,i.yuandaihui(1)},300)},loadMore:function(){if(this.pageVal+=1,this.isMoreLoading=!0,this.isLoading=!0,this.pageVal>this.pageCount)return this.isMoreLoading=!0,this.isLoading=!1,this.noMore=!0,0==this.getyuandailist.length&&(this.noMore=!1),!1;0!=this.seachhuilist.length&&0!=this.shuairesultlist.length||this.yuandaihui()}},watch:{$route:function(i,t){2==t.meta.slide&&(this.pageVal=1,this.loading=1,this.yuandaihui(),t.meta.slide=1)}},components:{}},o={render:function(){var i=this,t=i.$createElement,s=i._self._c||t;return s("div",{staticClass:"container",class:{notScroll:i.flagactive}},[s("div",{directives:[{name:"show",rawName:"v-show",value:i.huishuaixuan1,expression:"huishuaixuan1"}],staticClass:"qi_home_shuai"},[s("div",{staticClass:"qi_home_shuai_con_left",on:{click:function(t){return i.shaihide()}}}),i._v(" "),s("div",{staticClass:"qi_home_shuai_con"},[i._l(i.fangshuaixuanlist,function(t,a){return s("div",{key:a,staticClass:"item"},[s("div",{staticClass:"itemp"},[s("em",[i._v(i._s(t.name))]),i._v(" "),s("span",{staticClass:"check_wrap"},[s("input",{directives:[{name:"model",rawName:"v-model",value:i.checkedValue,expression:"checkedValue"}],attrs:{type:"checkbox",name:"fangch"},domProps:{value:t.dictionaryId,checked:Array.isArray(i.checkedValue)?i._i(i.checkedValue,t.dictionaryId)>-1:i.checkedValue},on:{click:function(t){return i.selectshuai(a,t)},change:function(a){var s=i.checkedValue,e=a.target,n=!!e.checked;if(Array.isArray(s)){var o=t.dictionaryId,u=i._i(s,o);e.checked?u<0&&(i.checkedValue=s.concat([o])):u>-1&&(i.checkedValue=s.slice(0,u).concat(s.slice(u+1)))}else i.checkedValue=n}}}),i._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:-1!=i.checkedValue.toString().indexOf(t.dictionaryId),expression:"(checkedValue.toString()).indexOf(item.dictionaryId)!=-1"}],staticClass:"xuanzhong"}),i._v(" "),s("span",{staticClass:"noxuanzhong"})])])])}),i._v(" "),s("div",{staticClass:"qi_sure_wrap"})],2),i._v(" "),s("div",{staticClass:"qi_sure"},[s("div",{staticClass:"item",attrs:{id:"congzhi"},on:{click:function(t){return i.chongzhime()}}},[s("span",[i._v("重置")])]),i._v(" "),s("div",{staticClass:"item sure",attrs:{id:"suan_sure"},on:{click:function(t){return i.suansure1()}}},[s("span",[i._v("确定")])])])]),i._v(" "),s("mt-loadmore",{ref:"loadmore",attrs:{"top-method":i.loadTop,"max-distance":150},on:{"top-status-change":i.handleTopChange}},[s("div",{staticClass:"mint-loadmore-top",attrs:{slot:"top"},slot:"top"},[s("span",{directives:[{name:"show",rawName:"v-show",value:"pull"===i.topStatus,expression:"topStatus === 'pull'"}],class:{rotate:"drop"===i.topStatus}},[i._v("下拉刷新")]),i._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"loading"===i.topStatus,expression:"topStatus === 'loading'"}]},[s("mt-spinner",{staticClass:"loading-more",attrs:{type:"triple-bounce",size:20}})],1),i._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"drop"===i.topStatus,expression:"topStatus === 'drop'"}]},[i._v("松开刷新")])]),i._v(" "),s("div",{staticClass:"qi_hui_fang_wrap"},[s("div",{staticClass:"qi_hui_fang_header"},[s("div",{staticClass:"daihuifang active"},[s("span",[i._v("等待回访")])]),i._v(" "),s("div",{staticClass:"huifanglishi",on:{click:function(t){return i.huifanglish()}}},[s("span",[i._v("回访历史")])]),i._v(" "),s("div",{staticClass:"shuaixuan",on:{click:function(t){return i.huishuaixuan()}}},[s("span",{class:{shuaixu:i.fangscreen}},[i._v("筛选")]),i._v("  "),s("em",{staticClass:"triangle_border_down",class:{shuaixu1:i.fangscreen}})])]),i._v(" "),s("div",{staticClass:"qi_hui_fang_con0"},[s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:i.loadMore,expression:"loadMore"}],staticClass:"datacontent",attrs:{"infinite-scroll-disabled":"isMoreLoading","infinite-scroll-immediate-check":!0,"infinite-scroll-distance":"10"}},[s("div",{staticClass:"qi_hui_data_list0"},i._l(i.getyuandailist,function(t,e){return s("div",{key:e,staticClass:"qi_hui_fang_item"},[s("div",{on:{click:function(a){return i.dengjijieguo(t.visitId,t.customerGxName,t.customerGxMobile,t.visitPlanDate,t.visitTypeName,t.remarks)}}},[s("div",{staticClass:"qi_hui_data"},[s("div",{staticClass:"mingcheng"},[s("img",{attrs:{src:a("Md7Z")}}),i._v("  "),s("span",[i._v(i._s(t.customerGxName))])]),i._v(" "),s("div",{staticClass:"fangvalue"},[i._v("   "),s("a",{attrs:{tel:t.customerGxMobile}},[i._v(i._s(t.customerGxMobile))])])]),i._v(" "),s("div",{staticClass:"qi_hui_data"},[s("div",{staticClass:"mingcheng1"},[i._v("回访日期：")]),i._v(" "),s("div",{staticClass:"fangvalue1"},[i._v(i._s(t.visitPlanDate?t.visitPlanDate.split(" ")[0]:""))])]),i._v(" "),s("div",{staticClass:"qi_hui_data"},[s("div",{staticClass:"mingcheng1"},[i._v("回访类型：")]),i._v(" "),s("div",{staticClass:"fangvalue1"},[i._v(i._s(t.visitTypeName))])]),i._v(" "),s("div",{staticClass:"qi_hui_data"},[s("div",{staticClass:"mingcheng1"},[i._v("备"),s("em",{staticStyle:{opacity:"0"}},[i._v("空格")]),i._v("注：")]),i._v(" "),s("div",{staticClass:"fangvalue1"},[i._v(i._s(t.remarks))]),i._v(" "),s("div",{staticClass:"quxiao_huifang",on:{click:function(a){return a.stopPropagation(),i.quxiaoshow(t.visitId)}}},[s("span",[i._v("取消回访")])])])])])}),0),i._v(" "),i.isLoading?s("div",{staticClass:"loading-box tc"},[s("mt-spinner",{staticClass:"loading-more",attrs:{type:"fading-circle",size:20}}),i._v(" "),s("span",{staticClass:"loading-more-txt"},[i._v("加载中...")])],1):i._e(),i._v(" "),i.noMore?s("div",{staticClass:"no-more"},[i._v("没有更多数据了")]):i._e()]),i._v(" "),s("div",{staticClass:"qi_hui_data_list0"},i._l(i.seachhuilist.length>0?i.seachhuilist:i.shuairesultlist,function(t,e){return s("div",{key:e,staticClass:"qi_hui_fang_item"},[s("div",{on:{click:function(a){return i.dengjijieguo(t.visitId,t.customerGxName,t.customerGxMobile,t.visitPlanDate,t.visitTypeName,t.remarks)}}},[s("div",{staticClass:"qi_hui_data"},[s("div",{staticClass:"mingcheng"},[s("img",{attrs:{src:a("Md7Z")}}),i._v("  "),s("span",[i._v(i._s(t.customerGxName))])]),i._v(" "),s("div",{staticClass:"fangvalue"},[i._v("    "),s("a",{attrs:{tel:t.customerGxMobile}},[i._v(i._s(t.customerGxMobile))])])]),i._v(" "),s("div",{staticClass:"qi_hui_data"},[s("div",{staticClass:"mingcheng1"},[i._v("回访日期：")]),i._v(" "),s("div",{staticClass:"fangvalue1"},[i._v(i._s(t.visitPlanDate?t.visitPlanDate.split(" ")[0]:""))])]),i._v(" "),s("div",{staticClass:"qi_hui_data"},[s("div",{staticClass:"mingcheng1"},[i._v("回访类型：")]),i._v(" "),s("div",{staticClass:"fangvalue1"},[i._v(i._s(t.visitTypeName))])]),i._v(" "),s("div",{staticClass:"qi_hui_data"},[s("div",{staticClass:"mingcheng1"},[i._v("备"),s("em",{staticStyle:{opacity:"0"}},[i._v("空格")]),i._v("注：")]),i._v(" "),s("div",{staticClass:"fangvalue1"},[i._v(i._s(t.remarks))]),i._v(" "),s("div",{staticClass:"quxiao_huifang",on:{click:function(a){return a.stopPropagation(),i.quxiaoshow(t.visitId)}}},[s("span",[i._v("取消回访")])])])])])}),0),i._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:i.zanwushow,expression:"zanwushow"}],staticClass:"zanwujilu"},[s("div",{staticClass:"title"},[i._v("暂无数据")])])])]),i._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:i.quxiaohui,expression:"quxiaohui"}],staticClass:"quxiao_tanchuang"},[s("div",{staticClass:"tuanchuang_wrap"},[s("div",{staticClass:"tuanchuang_header"},[s("span",[i._v("是否取消回访？")])]),i._v(" "),s("div",{staticClass:"tuanchuang_con"},i._l(i.quxiaoyuanlist,function(t,a){return s("div",{key:a,staticClass:"item"},[s("em",[i._v(i._s(t.name))]),i._v(" "),s("span",{staticClass:"check_wrap"},[s("input",{directives:[{name:"model",rawName:"v-model",value:i.selecttypevalue,expression:"selecttypevalue"}],attrs:{type:"radio",name:"rufangjian"},domProps:{value:t.name,checked:i._q(i.selecttypevalue,t.name)},on:{change:function(a){i.selecttypevalue=t.name}}}),i._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.name==i.selecttypevalue,expression:"item.name==selecttypevalue"}],staticClass:"xuanzhong"}),i._v(" "),s("span",{staticClass:"noxuanzhong"})])])}),0),i._v(" "),s("div",{staticClass:"tuanchuang_bottom"},[s("div",{staticClass:"fangfou",on:{click:function(t){return i.quxiaohide()}}},[s("span",{staticStyle:{"font-size":"0.3rem",color:"#1D1D1D"}},[i._v("再想想")])]),i._v(" "),s("div",{staticClass:"fangsure",attrs:{id:"quxiaohuif_sure"},on:{click:function(t){return i.quhuisure()}}},[s("span",{staticStyle:{"font-size":"0.3rem",color:"#1D1D1D"}},[i._v("确定")])])]),i._v(" "),s("div",{staticClass:"tuanchuang_close",on:{click:function(t){return i.quxiaohide()}}},[s("img",{attrs:{src:a("0CBg")}})])])])]),i._v(" "),s("div",{staticClass:"tianjia",on:{click:function(t){return i.tianjiahuifang1()}}})],1)},staticRenderFns:[]};var u=a("VU/8")(n,o,!1,function(i){a("dc1B")},"data-v-58935126",null);t.default=u.exports}});