webpackJsonp([32],{"66Qq":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={data:function(){return{index:0,topStatus:"",loading:0,show:!1,pageVal:1,pageSize:10,pageCount:1,isLoading:!1,isMoreLoading:!0,noMore:!1,getcarlist:[],nocustomer:!1,gonghao:""}},created:function(){this.getcarlistvalue(),this.getuser()},methods:{formatDate:function(t){var e=new Date(t),a=e.getFullYear(),o=e.getMonth()+1,s=e.getDate()<10?"0"+e.getDate():""+e.getDate();return o<10&&(o="0"+o),a+"-"+o+"-"+s},getcarlistvalue:function(){var t=this;this.instance.$post("/rest/wx/coupon/getCouponList",{page:this.pageVal,rows:this.pageSize,param:{id:0}},function(e){console.log(e),e.results.forEach(function(e){t.getcarlist.push(e),console.log(t.getcarlist)}),1==t.pageVal&&(t.$refs.loadmore.onTopLoaded(),0==e.results.length?(t.show=!0,t.nocustomer=!0):(t.show=!1,t.nocustomer=!1)),1==t.loading&&(t.getcarlist=[]),t.pageCount=e.pageCount,t.isMoreLoading=!1,t.isLoading=!1,t.loading=0})},getuser:function(){var t=this;this.instance.$post("/rest/wx/customer/getQyUser",{},function(e){console.log(e),t.gonghao=e.rows[0].userName})},qufenxiang:function(t,e){this.$router.push({name:"fenxianghaibao",query:{code:this.gonghao,id:t,name:e}})},handleTopChange:function(t){this.topStatus=t},loadTop:function(){var t=this;setTimeout(function(){t.pageVal=1,t.loading=1,t.getcustomer(1)},300)},loadMore:function(){if(this.pageVal+=1,this.isMoreLoading=!0,this.isLoading=!0,this.pageVal>this.pageCount)return this.isMoreLoading=!0,this.isLoading=!1,this.noMore=!0,0==this.getcarlist.length&&(this.noMore=!1),!1;this.getcarlistvalue()}},components:{}},s={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadTop,"max-distance":150},on:{"top-status-change":t.handleTopChange}},[o("div",{staticClass:"mint-loadmore-top",attrs:{slot:"top"},slot:"top"},[o("span",{directives:[{name:"show",rawName:"v-show",value:"pull"===t.topStatus,expression:"topStatus === 'pull'"}],class:{rotate:"drop"===t.topStatus}},[t._v("下拉刷新")]),t._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.topStatus,expression:"topStatus === 'loading'"}]},[o("mt-spinner",{staticClass:"loading-more",attrs:{type:"triple-bounce",size:20}})],1),t._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:"drop"===t.topStatus,expression:"topStatus === 'drop'"}]},[t._v("松开刷新")])]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.nocustomer,expression:"nocustomer"}],staticClass:"notCard"},[o("img",{attrs:{src:a("ESq+")}}),t._v(" "),o("p",[t._v("空空荡荡的～")])]),t._v(" "),o("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"datacontent",attrs:{"infinite-scroll-disabled":"isMoreLoading","infinite-scroll-immediate-check":!0,"infinite-scroll-distance":"10"}},[o("div",{staticClass:"card_g"},[o("div",{staticClass:"card_list"},t._l(t.getcarlist,function(e,a){return o("div",{key:a,on:{click:function(a){return t.qufenxiang(e.couponId,e.packageName)}}},[o("div",{class:{coupons:1==e.couponType,experience:0==e.couponType}},[o("div",{staticClass:"card_top"},[o("div",{staticClass:"exper_name"},[o("p",[t._v(t._s(e.packageName))]),t._v(" "),o("p",[t._v("FREE EXPERIENCE PASS")])])]),t._v(" "),o("div",{staticClass:"card_bottom"},[o("div",{staticClass:"date"},[t._v("领取日期截止："+t._s(t.formatDate(e.validDateEnd)))]),t._v(" "),o("div",{staticClass:"goShare arrow"},[t._v("去分享")])])])])}),0)])])])],1)},staticRenderFns:[]};var i=a("VU/8")(o,s,!1,function(t){a("6G3B")},"data-v-1f1c954d",null);e.default=i.exports},"6G3B":function(t,e){},"ESq+":function(t,e,a){t.exports=a.p+"static/img/notcard.c78e466.png"}});