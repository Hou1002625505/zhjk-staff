webpackJsonp([36],{"1Fc6":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("4kSj"),i=e.n(s),l={data:function(){return{detailId:this.$route.query.id,cusItemName:this.$route.query.itemName,cusItemId:this.$route.query.itemid,realName:"",realName1:"",time:"",time1:"",datatime:"",datatime1:"",js:"",xs:"",saveflag:!1,readonlyflag:!0,readonlyflag1:!0,back:!1,back1:!1}},created:function(){this.getusery(),this.getdetail()},methods:{getdetail:function(){this.instance.$get("/rest/wx/diagnosis/getDiagnosisById",{params:{detailId:this.detailId}},function(t){if(console.log(t),i()("#spine").val(t.spine),i()("#sub_health").val(t.subhealth),i()("#qm1").text(t.subhealthWrite),""!=t.subhealthWriteTime){var a=t.subhealthWriteTime.split(" ");i()("#time1").text("时间："+a[0]),i()(".time1").val(t.subhealthWriteTime)}if(i()("#overall_health").val(t.customerPlan),i()("#qm2").text(t.customerPlanWrite),""!=t.planWriteTime){var e=t.planWriteTime.split(" ");i()("#time2").text("时间："+e[0]),i()(".time2").val(t.planWriteTime)}if(i()("#skin").val(t.skin),i()("#qm3").text(t.skinWrite),""!=t.skinWriteTime){var s=t.skinWriteTime.split(" ");i()("#time3").text("时间："+s[0]),i()(".time3").val(t.skinWriteTime)}if(i()("#overall_health1").val(t.customerSkinPlan),i()("#qm4").text(t.customerSkinPlanWrite),""!=t.skinPlanWriteTime){var l=t.skinPlanWriteTime.split(" ");i()("#time4").text("时间："+l[0]),i()(".time4").val(t.skinPlanWriteTime)}})},getusery:function(){var t=this;this.instance.$post("/rest/wx/customer/getQyUser",{},function(a){console.log(a);var e=a.rows[0].roles;console.log(e),e.forEach(function(e){console.log(e),"SPA技师"==e.roleName?(t.realName1=a.rows[0].realName,t.readonlyflag1=!1,t.back1=!0,t.js="SPA技师",t.saveflag=!0):"销售"==e.roleName&&(t.realName=a.rows[0].realName,t.readonlyflag=!1,t.back=!0,t.xs="销售",t.saveflag=!0)})})},metab1:function(){"销售"==this.xs&&"SPA技师"!=this.js?this.$vux.toast.text("您不是亚健康师，不能填写"):"销售"!=this.xs&&"SPA技师"!=this.js&&this.$vux.toast.text("您既不是亚健康师也不是顾问，不能填写")},metab2:function(){"SPA技师"==this.js&&"销售"!=this.xs?this.$vux.toast.text("您不是顾问，不能填写"):"销售"!=this.xs&&"SPA技师"!=this.js&&this.$vux.toast.text("您既不是亚健康师也不是顾问，不能填写")},mesave:function(){var t=this,a=i.a.trim(i()("#spine").val()),e=i.a.trim(i()("#sub_health").val()),s=i.a.trim(i()("#overall_health").val()),l=i.a.trim(i()("#skin").val()),n=i.a.trim(i()("#overall_health1").val()),r=0;return""==this.cusItemid?(this.$vux.toast.text("请选择项目类型"),!1):(i()("textarea").each(function(){""!=i()(this).val()&&(r=1)}),0==r?(this.$vux.toast.text("请填写对应内容"),!1):void this.instance.$post("/rest/wx/diagnosis/updDiagnosis",{diagnosisId:this.detailId,cusItemId:this.cusItemId,spine:a,subhealth:e,subhealthWrite:i()("#qm1").text(),subhealthWriteTime:i()(".time1").val(),customerPlan:s,customerPlanWrite:i()("#qm2").text(),planWriteTime:i()(".time2").val(),skin:l,skinWrite:i()("#qm3").text(),skinWriteTime:i()(".time3").val(),customerSkinPlan:n,customerSkinPlanWrite:i()("#qm4").text(),skinPlanWriteTime:i()(".time4").val()},function(a){console.log(a),a.status&&t.$router.push({name:"panzhenlist",query:{customerId:t.customerId}})}))},formatDates1:function(t){var a=t.getFullYear(),e=t.getMonth()+1;e=e<10?"0"+e:e;var s=t.getDate();s=s<10?"0"+s:s;var i=t.getHours();i=i<10?"0"+i:i;var l=t.getMinutes();l=l<10?"0"+l:l;var n=t.getSeconds();return a+"-"+e+"-"+s+" "+i+":"+l+":"+(n=n<10?"0"+n:n)},formatDate1:function(t){var a=new Date(t);return this.formatDates1(a)}},components:{}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("div",{staticClass:"train_record"},[e("div",{staticClass:"train_record1 flex-item1"},[e("div",{staticClass:"xl_record",attrs:{id:"selectCus"}},[e("span",{attrs:{id:"course_type"}},[t._v(t._s(t.cusItemName))])])])]),t._v(" "),e("section",[e("div",{staticClass:"health_type"},[e("div",{staticClass:"health_title"},[t._v("脊柱情况判别")]),t._v(" "),e("div",{staticClass:"write"},[e("textarea",{staticClass:"table1",class:{backg:t.back1},attrs:{name:"",rows:"",cols:"",id:"spine",maxlength:"500",readonly:t.readonlyflag1,onkeyup:"this.value=this.value.replace(/\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDE4F]/g,'')"},on:{click:function(a){return t.metab1()}}})])]),t._v(" "),e("div",{staticClass:"health_type",staticStyle:{"padding-top":"0"}},[e("div",{staticClass:"health_title"},[t._v("亚健康判诊分析")]),t._v(" "),e("div",{staticClass:"write"},[e("textarea",{staticClass:"table1",class:{backg:t.back1},attrs:{name:"",rows:"",cols:"",id:"sub_health",maxlength:"500",readonly:t.readonlyflag1,onkeyup:"this.value=this.value.replace(/\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDE4F]/g,'')"},on:{click:function(a){return t.metab1()}}})])]),t._v(" "),e("div",{staticClass:"signature fhx"},[e("span",[t._v("亚健康师："),e("span",{staticClass:"name1",attrs:{id:"qm1"}},[t._v(t._s(t.realName1))])]),t._v(" "),e("span",{staticClass:"times",attrs:{id:"time1"}}),e("input",{staticClass:"time1",attrs:{type:"hidden",value:""}})]),t._v(" "),e("div",{staticClass:"health_type"},[e("div",{staticClass:"health_title"},[t._v("顾问全面健康管理方案")]),t._v(" "),e("div",{staticClass:"write"},[e("textarea",{staticClass:"table2",class:{backg:t.back},attrs:{name:"",rows:"",cols:"",id:"overall_health",maxlength:"500",readonly:t.readonlyflag,onkeyup:"this.value=this.value.replace(/\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDE4F]/g,'')"},on:{click:function(a){return t.metab2()}}})])]),t._v(" "),e("div",{staticClass:"signature fhx1"},[e("span",[t._v("顾问："),e("span",{staticClass:"name2",attrs:{id:"qm2"}},[t._v(t._s(t.realName))])]),t._v(" "),e("span",{staticClass:"times",attrs:{id:"time2"}}),e("input",{staticClass:"time2",attrs:{type:"hidden",value:""}})]),t._v(" "),e("div",{staticClass:"health_type"},[e("div",{staticClass:"health_title"},[t._v("面部肌肤判诊分析")]),t._v(" "),e("div",{staticClass:"write"},[e("textarea",{staticClass:"table1",class:{backg:t.back1},attrs:{name:"",rows:"",cols:"",id:"skin",maxlength:"500",readonly:t.readonlyflag1,onkeyup:"this.value=this.value.replace(/\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDE4F]/g,'')"},on:{click:function(a){return t.metab1()}}})])]),t._v(" "),e("div",{staticClass:"signature fhx"},[e("span",[t._v("亚健康师："),e("span",{staticClass:"name1",attrs:{id:"qm3"}},[t._v(t._s(t.realName1))])]),t._v(" "),e("span",{staticClass:"times",attrs:{id:"time3"}}),e("input",{staticClass:"time3",attrs:{type:"hidden",value:""}})]),t._v(" "),e("div",{staticClass:"health_type"},[e("div",{staticClass:"health_title"},[t._v("顾问全面健康管理方案")]),t._v(" "),e("div",{staticClass:"write"},[e("textarea",{staticClass:"table2",class:{backg:t.back},attrs:{name:"",rows:"",cols:"",id:"overall_health1",maxlength:"500",readonly:t.readonlyflag,onkeyup:"this.value=this.value.replace(/\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDE4F]/g,'')"},on:{click:function(a){return t.metab2()}}})])]),t._v(" "),e("div",{staticClass:"signature",staticStyle:{"padding-bottom":"0.25rem","border-bottom":"1px solid #e6e6e6"}},[e("span",[t._v("顾问："),e("span",{staticClass:"name2",attrs:{id:"qm4"}},[t._v(t._s(t.realName))])]),t._v(" "),e("span",{staticClass:"times",attrs:{id:"time4"}}),e("input",{staticClass:"time4",attrs:{type:"hidden",value:""}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.saveflag,expression:"saveflag"}],staticClass:"btn",on:{click:function(a){return t.mesave()}}},[t._v("保存")])])])},staticRenderFns:[]};var r=e("VU/8")(l,n,!1,function(t){e("YgEK")},"data-v-ec3dda7c",null);a.default=r.exports},YgEK:function(t,a){}});